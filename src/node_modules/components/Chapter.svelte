<a class="block flex py-2 border-b border-gray-500 dark:border-gray-600" href="/read/{id.toString(36)}">
    <div class="flex-grow">
        <a class="hover:underline" href="/read/{id.toString(36)}">
            {#if number_volume}
                Vol. {number_volume}
            {/if}
            {#if number_absolute}
                Ch. {number_absolute}
            {/if}
            {#if title}
                    - {title}
            {/if}
        </a>
        <div class="text-sm">
            <span title="{new Date(time_uploaded)}">
                {timeAgo(time_uploaded)}
            </span>
                â€¢ 
            {#each groups as {name, id}, i}
                {#if i != 0}
                        | 
                {/if}
                <a class="hover:underline" href="/group/{id}/{slugify(name)}">{name}</a>
            {/each}
        </div>
    </div>
    <div class="flex-grow-0" style="width: 80px;">
        <div class="flex items-center tabular-nums">
            <svg class="fill-current h-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M17.56 17.66a8 8 0 0 1-11.32 0L1.3 12.7a1 1 0 0 1 0-1.42l4.95-4.95a8 8 0 0 1 11.32 0l4.95 4.95a1 1 0 0 1 0 1.42l-4.95 4.95zm-9.9-1.42a6 6 0 0 0 8.48 0L20.38 12l-4.24-4.24a6 6 0 0 0-8.48 0L3.4 12l4.25 4.24zM11.9 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/>
            </svg>
            {views}
        </div>
        <a href="/read/{id.toString(36)}/#/comments" class="hover:underline flex items-center tabular-nums">
            <svg class="fill-current h-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M2 15V5c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v15a1 1 0 0 1-1.7.7L16.58 17H4a2 2 0 0 1-2-2zM20 5H4v10h13a1 1 0 0 1 .7.3l2.3 2.29V5z"/>
            </svg>
            {comments}
        </a>
    </div>
</a>

<script>
    import { slugify, timeAgo } from 'filters.js'

    export let chapter

    const { number_volume, number_absolute, time_uploaded, groups, views, comments, title, id } = chapter
</script>