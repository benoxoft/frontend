const pluralize = (time, label) => {
	return time === 1 ? time + label : time + label + 's'
}

export const timeAgo = time => {
	const between = Date.now() / 1000 - new Date(time).getTime() / 1000
	if (between < 3600) {
		return pluralize(~~(between / 60), ' minute')
	} else if (between < 86400) {
		return pluralize(~~(between / 3600), ' hour')
	} else if (between < 2592000) {
		return pluralize(~~(between / 86400), ' day')
	} else if (between < 31536000) {
		return pluralize(~~(between / 2592000), ' month')
	} else {
		return pluralize(~~(between / 31536000), ' year')
	}
}

export const slugify = text => {
	const a = 'àáäâãåăæçèéëêǵḧìíïîḿńǹñòóöôœṕŕßśșțùúüûǘẃẍÿź·/_,:;'
	const b = 'aaaaaaaaceeeeghiiiimnnnoooooprssstuuuuuwxyz------'
	const p = new RegExp(a.split('').join('|'), 'g')

	return text
		.toString()
		.toLowerCase()
		.trim()
		.replace(/\s+/g, '-') // Replace spaces with -
		.replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters
		.replace(/&/g, '-and-') // Replace & with 'and'
		.replace(/[^\w-]+/g, '') // Remove all non-word characters
		.replace(/--+/g, '-') // Replace multiple - with single -
}

export const removeFalsy = obj => {
	const newObj = {}
	Object.keys(obj).forEach(prop => {
		if (obj[prop] || typeof obj[prop] == 'boolean') newObj[prop] = obj[prop]
	})
	return newObj
}